<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kgc.dao.UserMapper">
    <insert id="registerUser">
        insert into easybuy_user(loginName,userName,password,identityCode,email,mobile)
        value(#{loginName},#{userName},#{password},#{identityCode},#{email},#{mobile})
    </insert>
    <select id="checkLoginName" resultType="User">
        select id,loginName,userName,password,sex,identityCode,email,mobile,type,isDelete
        from easybuy_user where isDelete = 0
        <if test="loginName!=null and loginName!=''">
            and loginName = #{loginName}
        </if>
    </select>
    <select id="loginCheck" resultType="User">
        select id,loginName,userName,password,sex,identityCode,email,mobile,type,isDelete
        from easybuy_user
        <where>
            isDelete = 0
            <if test="loginName!=null and loginName!=''">
                and loginName = #{loginName}
            </if>
            <if test="password!=null and password!=''">
                and loginName = #{loginName}
            </if>
        </where>
    </select>
    <select id="identityCheck" resultType="User">
        select id,loginName,userName,password,sex,identityCode,email,mobile,type,isDelete
        from easybuy_user
        <where>
            isDelete = 0
            <if test="identityCode!=null and identityCode!=''">
                and identityCode = #{identityCode}
            </if>
        </where>
    </select>
    <update id="findPsw">
        update easybuy_user set password=#{password} where loginName=#{loginName}
    </update>

</mapper>
