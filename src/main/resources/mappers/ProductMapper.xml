<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kgc.dao.ProductDao">
    <select id="getProductById" resultType="Product">
        SELECT id,
               name,
               description,
               price,
               stock,
               categoryLevelId,
               picId,
               isDelete
        FROM easybuy_product
        WHERE isDelete=0 AND id=#{id};
    </select>

    <select id="getSimilarProducts" resultType="Product">
        SELECT id,
               name,
               description,
               price,
               stock,
               categoryLevelId,
               picId,
               isDelete
        FROM easybuy_product
        WHERE isDelete=0 AND categoryLevelId=#{categoryLevelId};
    </select>

    <select id="getProductsByHigHestId" resultType="Product">
        SELECT id,
               name,
               description,
               price,
               stock,
               categoryLevelId,
               picId,
               isDelete
        FROM easybuy_product WHERE isDelete=0 AND categoryLevelId IN
          (SELECT id FROM easybuy_product_category
             WHERE isDelete=0 AND parentId IN
                (SELECT id FROM easybuy_product_category WHERE isDelete=0 AND parentId=#{id}));
    </select>
</mapper>